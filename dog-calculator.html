<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2430195322311013"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dog Raw Diet Calculator (BARF/PMR) - Exact Ratios</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-stone-50 text-gray-800 font-sans min-h-screen flex flex-col">

    <nav class="bg-white shadow-md">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-emerald-700">RawDiet üêæ</a>
            <select id="langSwitcher" class="bg-gray-100 border border-gray-300 text-xs rounded p-1">
                <option value="en">üá∫üá∏ EN</option>
                <option value="es">üá™üá∏ ES</option>
                <option value="ja">üáØüáµ JP</option>
                <option value="zh">üá®üá≥ ZH</option>
            </select>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-10 max-w-3xl flex-grow">
        <div class="bg-white p-8 md:p-10 rounded-2xl shadow-xl border border-stone-100">
            <h1 class="text-2xl md:text-3xl font-bold text-emerald-800 mb-8 flex items-center">
                <span class="bg-stone-100 p-2 rounded-lg mr-3 text-2xl">üçñ</span> 
                <span data-i18n="calc_title">Dog Raw Diet Calculator (BARF) - Exact Ratios</span>
            </h1>

            <form id="dogForm" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2" data-i18n="label_weight">Dog Weight (kg)</label>
                        <div class="relative flex items-center gap-3">
                            <input type="number" id="dogWeight" step="0.1" class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 text-lg" placeholder="15">
                            <select id="unitSelect" class="border border-gray-300 rounded px-3 py-2 text-sm bg-white" title="Units">
                                <option value="kg">kg</option>
                                <option value="lb">lb</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2" data-i18n="label_state">Dog State</label>
                        <select id="dogState" class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 bg-white">
                            <option value="0.025" data-i18n="opt_adult">Adult (Normal 2.5%)</option>
                            <option value="0.02" data-i18n="opt_diet">Adult (Overweight 2%)</option>
                            <option value="0.035" data-i18n="opt_active">Working/Active (3.5%)</option>
                            <option value="0.05" data-i18n="opt_puppy_young">Puppy (2-4 mo 5-6%)</option>
                            <option value="0.04" data-i18n="opt_puppy_old">Puppy (4-12 mo 4%)</option>
                        </select>
                    </div>
                </div>

                <div class="flex items-center space-x-3 bg-green-50 p-4 rounded-xl border border-green-100 cursor-pointer hover:bg-green-100 transition" onclick="document.getElementById('includeVeg').click()">
                    <input type="checkbox" id="includeVeg" class="w-5 h-5 text-emerald-600 rounded focus:ring-emerald-500">
                    <label for="includeVeg" class="text-gray-700 font-bold cursor-pointer select-none" data-i18n="chk_veg">Include Veggies/Fruit (10%) - BARF</label>
                </div>

                <button type="button" onclick="calculateDog()" class="w-full bg-emerald-800 text-white font-bold py-4 rounded-xl hover:bg-emerald-900 transition shadow-md text-lg" data-i18n="btn_calc">Calculate</button>
            </form>

            <div id="dogResult" class="hidden mt-10 border-t border-gray-100 pt-8">
                <div class="text-center mb-8">
                    <h3 class="text-gray-500 text-sm font-bold uppercase tracking-wider mb-1" data-i18n="res_total">Daily Intake</h3>
                    <div class="text-5xl font-extrabold text-emerald-700"><span id="dogTotal">0</span> <span class="text-2xl text-emerald-500">g</span></div>
                </div>
                <div class="grid grid-cols-2 gap-4 mt-6 text-sm md:text-base" id="breakdownGrid"></div>
            </div>
        </div>

        <!-- Accordion -->
        <div class="space-y-4 mt-10">
            <details class="bg-white p-5 rounded-xl shadow-sm group border border-stone-100">
                <summary class="font-bold cursor-pointer list-none flex justify-between text-emerald-800 items-center">
                    <span class="flex items-center gap-2" data-i18n="faq_veg_q">ü•¶ Safe Vegetables?</span>
                    <span class="transition group-open:rotate-180 text-emerald-500">‚ñº</span>
                </summary>
                <div class="mt-4 text-gray-600 text-sm leading-relaxed pl-2 border-l-2 border-emerald-200" data-i18n="faq_veg_a">
                    Good: Broccoli, Carrots, Pumpkin (cooked), Spinach (small amount), Blueberries, Apples (no seeds). *Blend into puree for digestion.
                </div>
            </details>

            <details class="bg-white p-5 rounded-xl shadow-sm group border border-stone-100">
                <summary class="font-bold cursor-pointer list-none flex justify-between text-red-800 items-center">
                    <span class="flex items-center gap-2" data-i18n="faq_bad_q">üö´ Toxic Foods</span>
                    <span class="transition group-open:rotate-180 text-red-500">‚ñº</span>
                </summary>
                <div class="mt-4 text-gray-600 text-sm leading-relaxed pl-2 border-l-2 border-red-200" data-i18n="faq_bad_a">
                    NEVER FEED: Onions, Garlic (large amount), Grapes/Raisins, Chocolate, Xylitol, Cooked Bones.
                </div>
            </details>
        </div>
    </div>

    <script>
        const translations = {
            en: {
                calc_title: "Dog Raw Diet Calculator (BARF) - Exact Ratios", label_weight: "Dog Weight (kg)", label_state: "Dog State",
                opt_adult: "Adult (Normal 2.5%)", opt_diet: "Adult (Overweight 2%)", opt_active: "Working/Active (3.5%)", opt_puppy_young: "Puppy (2-4 mo 5-6%)", opt_puppy_old: "Puppy (4-12 mo 4%)",
                chk_veg: "Include Veggies/Fruit (10%) - BARF", btn_calc: "Calculate", res_total: "Daily Intake",
                faq_veg_q: "ü•¶ Safe Vegetables?", faq_veg_a: "Good: Broccoli, Carrots, Pumpkin (cooked), Spinach (small amount), Blueberries. *Puree them.",
                faq_bad_q: "üö´ Toxic Foods", faq_bad_a: "NEVER FEED: Onions, Grapes/Raisins, Chocolate, Cooked Bones.",
                txt_muscle: "ü•© Muscle", txt_bone: "ü¶¥ Bone", txt_liver: "üêî Liver", txt_organ: "üß† Organ", txt_veg: "ü•¶ Veggies"
            },
            es: {
                calc_title: "Calculadora Dieta Cruda para Perros (BARF)", label_weight: "Peso (kg)", label_state: "Estado",
                opt_adult: "Adulto (Normal 2.5%)", opt_diet: "Adulto (Dieta 2%)", opt_active: "Activo (3.5%)", opt_puppy_young: "Cachorro (2-4m 5-6%)", opt_puppy_old: "Cachorro (4-12m 4%)",
                chk_veg: "Incluir Verduras/Fruta (10%)", btn_calc: "Calcular", res_total: "Ingesta Diaria",
                faq_veg_q: "ü•¶ ¬øVerduras Seguras?", faq_veg_a: "Bien: Br√≥coli, Zanahorias, Calabaza (cocida), Ar√°ndanos. *Hacer pur√©.",
                faq_bad_q: "üö´ Alimentos T√≥xicos", faq_bad_a: "NUNCA: Cebolla, Uvas, Chocolate, Huesos Cocidos.",
                txt_muscle: "ü•© Carne", txt_bone: "ü¶¥ Hueso", txt_liver: "üêî H√≠gado", txt_organ: "üß† V√≠scera", txt_veg: "ü•¶ Verdura"
            },
            de: {
                calc_title: "Hunde Rohe Ern√§hrung Rechner (BARF) - Genaues Verh√§ltnis", label_weight: "Hund Gewicht (kg)", label_state: "Hund Zustand",
                opt_adult: "Erwachsen (Normal 2.5%)", opt_diet: "√úbergewicht (2%)", opt_active: "Arbeitend/Aktiv (3.5%)", opt_puppy_young: "Welpe (2-4m 5-6%)", opt_puppy_old: "Welpe (4-12m 4%)",
                chk_veg: "Gem√ºse/Obst beif√ºgen (10%) - BARF", btn_calc: "Berechnen", res_total: "Tagesbedarf",
                faq_veg_q: "ü•¶ Sichere Gem√ºse?", faq_veg_a: "Gut: Brokkoli, Karotten, K√ºrbis (gekocht), Spinat (kleine Menge), Blaubeeren.",
                faq_bad_q: "üö´ Giftige Lebensmittel", faq_bad_a: "NIE F√úTTERN: Zwiebeln, Weintrauben/Rosinen, Schokolade, Xylitol, Gekochte Knochen.",
                txt_muscle: "ü•© Muskel", txt_bone: "ü¶¥ Knochen", txt_liver: "üêî Leber", txt_organ: "üß† Innereien", txt_veg: "ü•¶ Gem√ºse"
            },
            ja: {
                calc_title: "Áä¨Áî®ÁîüÈ£ü (BARF) Ë®àÁÆóÊ©ü", label_weight: "‰ΩìÈáç (kg)", label_state: "Áä∂ÊÖã",
                opt_adult: "ÊàêÁä¨ (ÈÄöÂ∏∏ 2.5%)", opt_diet: "ÊàêÁä¨ („ÉÄ„Ç§„Ç®„ÉÉ„Éà 2%)", opt_active: "Ê¥ªÂãïÁöÑ (3.5%)", opt_puppy_young: "Â≠êÁä¨ (2-4„É∂Êúà 5-6%)", opt_puppy_old: "Â≠êÁä¨ (4-12„É∂Êúà 4%)",
                chk_veg: "ÈáéËèú„ÉªÊûúÁâ©„ÇíÂê´„ÇÅ„Çã (10%)", btn_calc: "Ë®àÁÆó„Åô„Çã", res_total: "1Êó•„ÅÆÁ∑èÈáè",
                faq_veg_q: "ü•¶ ÂÆâÂÖ®„Å™ÈáéËèú„ÅØÔºü", faq_veg_a: "Êé®Â•®Ôºö„Éñ„É≠„ÉÉ„Ç≥„É™„Éº„ÄÅ‰∫∫ÂèÇ„ÄÅ„Åã„Åº„Å°„ÇÉÔºàÂä†ÁÜ±Ôºâ„ÄÅ„Éñ„É´„Éº„Éô„É™„Éº„ÄÇ*Ê∂àÂåñ„ÅÆ„Åü„ÇÅ„Éö„Éº„Çπ„ÉàÁä∂„Å´„ÄÇ",
                faq_bad_q: "üö´ Âç±Èô∫„Å™È£ü„ÅπÁâ©", faq_bad_a: "Á¶ÅÊ≠¢ÔºöÁéâ„Å≠„Åé„ÄÅ„Å∂„Å©„ÅÜ„ÄÅ„ÉÅ„Éß„Ç≥„É¨„Éº„Éà„ÄÅÂä†ÁÜ±„Åó„ÅüÈ™®„ÄÇ",
                txt_muscle: "ü•© Á≠ãËÇâ", txt_bone: "ü¶¥ È£üÁî®È™®", txt_liver: "üêî „É¨„Éê„Éº", txt_organ: "üß† ÂÜÖËáì", txt_veg: "ü•¶ ÈáéËèú"
            },
            zh: {
                calc_title: "ÁãóÁãóÁîüÈ™®ËÇâ (Raw Diet) ËÆ°ÁÆóÂô®", label_weight: "ÁãóÁãó‰ΩìÈáç (kg)", label_state: "ÁãóÁãóÁä∂ÊÄÅ",
                opt_adult: "ÊàêÁä¨ (Ê≠£Â∏∏ 2.5%)", opt_diet: "ÊàêÁä¨ (ÈúÄÂáèËÇ• 2%)", opt_active: "Â∑•‰ΩúÁä¨ (3.5%)", opt_puppy_young: "ÂπºÁä¨ (2-4‰∏™Êúà 5-6%)", opt_puppy_old: "ÂπºÁä¨ (4-12‰∏™Êúà 4%)",
                chk_veg: "ÂåÖÂê´Ëî¨ËèúÊ∞¥Êûú (10%)", btn_calc: "ËÆ°ÁÆóÂñÇÈ£üÈáè", res_total: "ÊØèÊó•ÈúÄÂñÇÈ£ü",
                faq_veg_q: "ü•¶ ÁãóÁãóËÉΩÂêÉ‰ªÄ‰πàËî¨ËèúÔºü", faq_veg_a: "Êé®ËçêÔºöË•øÂÖ∞Ëä±„ÄÅËÉ°ËêùÂçú„ÄÅÂçóÁìúÔºàÁÖÆÁÜüÔºâ„ÄÅËìùËéì„ÄÇ*Âª∫ËÆÆÊâìÊàêÊ≥•„ÄÇ",
                faq_bad_q: "üö´ ÁªùÂØπÁ¶ÅÈ£üÊ∏ÖÂçï", faq_bad_a: "ÁªùÂØπ‰∏çÂèØÂñÇÈ£üÔºöÊ¥ãËë±„ÄÅËë°ËêÑ„ÄÅÂ∑ßÂÖãÂäõ„ÄÅÁÜüÈ™®Â§¥„ÄÇ",
                txt_muscle: "ü•© ËÇåËÇâ", txt_bone: "ü¶¥ È£üÁî®È™®", txt_liver: "üêî ËÇùËÑè", txt_organ: "üß† ÂÖ∂‰ªñÂÜÖËÑè", txt_veg: "ü•¶ Ëî¨Êûú"
            }
        };

        const langSwitcher = document.getElementById('langSwitcher');

        function setLanguage(lang) {
            if (!translations[lang]) lang = 'en';
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) el.innerHTML = translations[lang][key];
            });
            langSwitcher.value = lang;
            localStorage.setItem('purebarf_lang', lang);
        }

        langSwitcher.addEventListener('change', (e) => {
            setLanguage(e.target.value);
            // Re-calculate if result is already showing to update labels
            if(!document.getElementById('dogResult').classList.contains('hidden')) calculateDog();
        });
        
        const savedLang = localStorage.getItem('purebarf_lang') || 'en'; // English-first default
        setLanguage(savedLang);

        // Unit toggle (kg / lb) - keep internal calculations in kilograms
        const unitSelect = document.getElementById('unitSelect');
        const savedUnit = localStorage.getItem('unit_pref') || 'kg';
        unitSelect.value = savedUnit;

        function toKg(value, unit) {
            if (!value) return 0;
            if (unit === 'lb') return parseFloat(value) / 2.20462;
            return parseFloat(value);
        }

        function toDisplay(valueKg, unit) {
            if (unit === 'lb') return (valueKg * 2.20462).toFixed(2);
            return valueKg;
        }

        unitSelect.addEventListener('change', (e) => {
            const prev = localStorage.getItem('unit_pref') || 'kg';
            const next = e.target.value;
            const inp = document.getElementById('dogWeight');
            const currentVal = parseFloat(inp.value);
            if (!isNaN(currentVal)) {
                let kgs = toKg(currentVal, prev);
                const newDisplay = toDisplay(kgs, next);
                inp.value = newDisplay;
            }
            localStorage.setItem('unit_pref', next);
        });

        function calculateDog() {
            const weight = parseFloat(document.getElementById('dogWeight').value);
            const ratio = parseFloat(document.getElementById('dogState').value);
            const hasVeg = document.getElementById('includeVeg').checked;
            const lang = langSwitcher.value; // Get current lang for result labels
            const t = translations[lang] || translations['en'];

            if (!weight) {
                const msgs = {en: "Enter weight", es: "Ingrese peso", ja: "‰ΩìÈáç„ÇíÂÖ•Âäõ", zh: "ËØ∑ËæìÂÖ•‰ΩìÈáç", de: "Bitte Gewicht eingeben"};
                alert(msgs[langSwitcher.value] || "Enter weight");
                return;
            }

            // convert to kg first
            const unit = document.getElementById('unitSelect').value || 'kg';
            const weightKg = toKg(weight, unit);

            const total = weightKg * 1000 * ratio;
            let breakdownHtml = '';
            const itemClass = "p-4 rounded-lg flex flex-col justify-center items-center text-center shadow-sm";
            
            if (hasVeg) {
                breakdownHtml += `
                    <div class="${itemClass} bg-red-50 text-red-800"><span class="font-bold text-lg block">${Math.round(total * 0.7)}g</span><span class="text-xs">${t.txt_muscle}</span></div>
                    <div class="${itemClass} bg-amber-50 text-amber-800"><span class="font-bold text-lg block">${Math.round(total * 0.1)}g</span><span class="text-xs">${t.txt_bone}</span></div>
                    <div class="${itemClass} bg-purple-50 text-purple-800"><span class="font-bold text-lg block">${Math.round(total * 0.05)}g</span><span class="text-xs">${t.txt_liver}</span></div>
                    <div class="${itemClass} bg-blue-50 text-blue-800"><span class="font-bold text-lg block">${Math.round(total * 0.05)}g</span><span class="text-xs">${t.txt_organ}</span></div>
                    <div class="${itemClass} bg-green-50 text-green-800 col-span-2"><span class="font-bold text-lg block">${Math.round(total * 0.1)}g</span><span class="text-xs">${t.txt_veg}</span></div>
                `;
            } else {
                breakdownHtml += `
                    <div class="${itemClass} bg-red-50 text-red-800"><span class="font-bold text-lg block">${Math.round(total * 0.8)}g</span><span class="text-xs">${t.txt_muscle}</span></div>
                    <div class="${itemClass} bg-amber-50 text-amber-800"><span class="font-bold text-lg block">${Math.round(total * 0.1)}g</span><span class="text-xs">${t.txt_bone}</span></div>
                    <div class="${itemClass} bg-purple-50 text-purple-800"><span class="font-bold text-lg block">${Math.round(total * 0.05)}g</span><span class="text-xs">${t.txt_liver}</span></div>
                    <div class="${itemClass} bg-blue-50 text-blue-800"><span class="font-bold text-lg block">${Math.round(total * 0.05)}g</span><span class="text-xs">${t.txt_organ}</span></div>
                `;
            }

            document.getElementById('dogTotal').innerText = Math.round(total);
            document.getElementById('breakdownGrid').innerHTML = breakdownHtml;
            document.getElementById('dogResult').classList.remove('hidden');
        }
    </script>
</body>
</html>
